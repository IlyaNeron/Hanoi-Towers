"use strict";$(function(){function e(){k.hide().css("opacity","0"),v.empty(),f.prop("disabled",!1),w.prop("disabled",!1),b.hide().prop("disabled",!1),b.removeClass("btn_timer_pause"),y=!0,j=!0,clearInterval(g),x.html("00:"),C.html("00"),a(),l(),u.hide().prop("disabled",!1)}function i(){o(),p(),s(),d(),n(),t(),a(),l()}function n(){v.children().draggable({containment:".towers-wrapper",cancel:".disc:not(:first-child)",revert:!0})}function t(){var e=v.first().children().length;v.droppable({accept:".disc",drop:function(i,n){if($(this).children().length>0&&$(n.draggable).width()>$(this).children("div:eq(0)").width())return!1;$(n.draggable).remove();var t=$(n.draggable).width(),d=$(n.draggable).css("background"),c=$('<div class="disc"></div>');c.width(t),c.css("background",d),c.draggable({containment:".towers-wrapper",cancel:".disc:not(:first-child)",revert:!0}),$(this).prepend(c),v.last().children().length===e&&(v.children().draggable("disable"),y=!1,b.prop("disabled",!0),u.prop("disabled",!0),r())}})}function r(){k.show().animate({opacity:1})}function d(){var e=0,i=0;g=setInterval(function(){!0===y&&(e++,e<10&&C.html("0"+e),e>=10&&C.html(e),e>59&&(e=0,i+=1,x.html("0"+i+":"),C.html("0"+e),i>=10&&x.html(i+":")))},1e3)}function c(){b.toggleClass("btn_timer_pause"),j?(y=!1,v.children().draggable("disable"),j=!1):(y=!0,v.children().draggable("enable"),j=!0)}function a(){b.click(c)}function l(){u.click(e)}function s(){f.prop("disabled",!0),w.prop("disabled",!0)}function o(){f.val()>6?f.val(6):f.val()<2&&f.val(2)}function p(){for(var e=1;e<=f.val();e++){var i=h[e];v.first().append('<div class="disc" style="width: '+40*e+"px; background: "+i+'"></div>'),$(this).prop("disabled",!0),b=$(".btn_pause"),b.show(),u=$(".btn_reset"),u.show()}}var h,b,u,g,f=$(".discs_value"),v=$(".tower"),m=$(".timer-block"),w=$(".btn-start"),k=$(".win-popup"),_=$(".btn_new_game"),y=!0,j=!0,x=m.find(".minutes"),C=m.find(".seconds");w.click(i),_.click(e),$(document).ready(function(){$.getJSON("json/colors.json",function(e){h=e,console.log(h)})}),$(document).ready(function(){f.children().css({background:"#111",border:"1px solid #ccc",cursor:"pointer"})})});